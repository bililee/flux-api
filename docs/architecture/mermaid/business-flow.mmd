flowchart TD
    %% Áî®Êà∑ËØ∑Ê±Ç
    Start(["`üë§ **Áî®Êà∑ËØ∑Ê±Ç**
    APIË∞ÉÁî®`"]) 
    
    %% APIÁΩëÂÖ≥
    Gateway{"`üö™ **APISIXÁΩëÂÖ≥**
    ËÆ§ËØÅ & ÈôêÊµÅ`"}
    
    %% ÊéßÂà∂Âô®
    Controller["`üéØ **ÊéßÂà∂Âô®Â±Ç**
    ÂèÇÊï∞È™åËØÅ`"]
    
    %% ÁºìÂ≠òÊ£ÄÊü•
    CacheCheck{"`üì¶ **ÁºìÂ≠òÊ£ÄÊü•**
    Êú¨Âú∞ + Redis`"}
    
    %% ÁºìÂ≠òÂëΩ‰∏≠
    CacheHit["`‚úÖ **ÁºìÂ≠òÂëΩ‰∏≠**
    Áõ¥Êé•ËøîÂõû`"]
    
    %% ËØ∑Ê±ÇÂéªÈáç
    Dedup{"`üîÄ **ËØ∑Ê±ÇÂéªÈáç**
    Áõ∏ÂêåËØ∑Ê±ÇÂêàÂπ∂`"}
    
    %% ËøúÁ®ãË∞ÉÁî®
    RemoteCall["`üåê **ËøúÁ®ãË∞ÉÁî®**
    Êï∞ÊçÆÊúçÂä°ÂïÜ`"]
    
    %% ÈáçËØïÊú∫Âà∂
    Retry{"`üîÑ **ÈáçËØïÊú∫Âà∂**
    ÊåáÊï∞ÈÄÄÈÅø`"}
    
    %% ÈôçÁ∫ßÂ§ÑÁêÜ
    Fallback["`üõ°Ô∏è **ÈôçÁ∫ßÂ§ÑÁêÜ**
    ËøîÂõûËøáÊúüÊï∞ÊçÆ`"]
    
    %% ÁºìÂ≠òÊõ¥Êñ∞
    CacheUpdate["`üìù **ÁºìÂ≠òÊõ¥Êñ∞**
    Â≠òÂÇ®Êñ∞Êï∞ÊçÆ`"]
    
    %% APMÁõëÊéß
    APM["`üìä **APMÁõëÊéß**
    ÊôÆÁ±≥ÊåáÊ†áÊî∂ÈõÜ`"]
    
    %% ËøîÂõûÂìçÂ∫î
    Response(["`üì§ **ËøîÂõûÂìçÂ∫î**
    JSONÊ†ºÂºè`"])
    
    %% XXL-Job‰ªªÂä°
    XXLJob["`‚è∞ **XXL-Job**
    ÂÆöÊó∂Êï∞ÊçÆÂêåÊ≠•`"]
    
    %% ÊµÅÁ®ãËøûÊé•
    Start --> Gateway
    Gateway -->|ÈÄöËøá| Controller
    Gateway -->|ÊãíÁªù| Response
    
    Controller --> CacheCheck
    CacheCheck -->|ÂëΩ‰∏≠| CacheHit
    CacheCheck -->|Êú™ÂëΩ‰∏≠| Dedup
    
    CacheHit --> APM
    
    Dedup -->|Êñ∞ËØ∑Ê±Ç| RemoteCall
    Dedup -->|ÈáçÂ§çËØ∑Ê±Ç| CacheHit
    
    RemoteCall -->|ÊàêÂäü| CacheUpdate
    RemoteCall -->|Â§±Ë¥•| Retry
    
    Retry -->|ÈáçËØïÊàêÂäü| CacheUpdate
    Retry -->|ÈáçËØïÂ§±Ë¥•| Fallback
    
    CacheUpdate --> APM
    Fallback --> APM
    
    APM --> Response
    
    %% ÂêéÂè∞‰ªªÂä°
    XXLJob -.->|ÂÆöÊó∂ÂêåÊ≠•| RemoteCall
    
    %% Ê†∑ÂºèÂÆö‰πâ
    classDef startEndStyle fill:#e8f5e8,stroke:#4caf50,stroke-width:3px
    classDef gatewayStyle fill:#fff8e1,stroke:#ff9800,stroke-width:2px
    classDef processStyle fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    classDef cacheStyle fill:#fce4ec,stroke:#e91e63,stroke-width:2px
    classDef remoteStyle fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    classDef monitorStyle fill:#e0f2f1,stroke:#009688,stroke-width:2px
    classDef jobStyle fill:#fff3e0,stroke:#ff5722,stroke-width:2px
    
    %% Â∫îÁî®Ê†∑Âºè
    class Start,Response startEndStyle
    class Gateway gatewayStyle
    class Controller,Dedup processStyle
    class CacheCheck,CacheHit,CacheUpdate,Fallback cacheStyle
    class RemoteCall,Retry remoteStyle
    class APM monitorStyle
    class XXLJob jobStyle