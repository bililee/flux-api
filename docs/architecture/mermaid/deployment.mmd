graph TD
    %% Áî®Êà∑Â±Ç
    subgraph UserLayer["`üë• **Áî®Êà∑ËÆøÈóÆÂ±Ç**`"]
        MobileApp["`üì± **ÁßªÂä®Â∫îÁî®**
        iOS/Android`"]
        WebApp["`üåê **WebÂâçÁ´Ø**
        React/Vue`"]
        ThirdPartyAPI["`üîó **Á¨¨‰∏âÊñπÁ≥ªÁªü**
        Âêà‰Ωú‰ºô‰º¥API`"]
        InternalTools["`üõ†Ô∏è **ÂÜÖÈÉ®Â∑•ÂÖ∑**
        ÁÆ°ÁêÜÂêéÂè∞`"]
    end
    
    %% CDNÂíåÂÆâÂÖ®Â±Ç
    subgraph SecurityLayer["`üîí **ÂÆâÂÖ®Èò≤Êä§Â±Ç**`"]
        CDN["`‚ö° **CDN**
        - ÂÖ®ÁêÉÂä†ÈÄü
        - ÈùôÊÄÅËµÑÊ∫êÁºìÂ≠ò
        - DDoSÈò≤Êä§`"]
        
        WAF["`üõ°Ô∏è **WAF**
        - WebÂ∫îÁî®Èò≤ÁÅ´Â¢ô
        - ÊîªÂáªÈò≤Êä§
        - ÊµÅÈáèÊ∏ÖÊ¥ó`"]
    end
    
    %% Ë¥üËΩΩÂùáË°°Â±Ç
    subgraph LoadBalancerLayer["`‚öñÔ∏è **Ë¥üËΩΩÂùáË°°Â±Ç**`"]
        SLB["`üîÑ **Ë¥üËΩΩÂùáË°°Âô®**
        - ÂõõÂ±ÇË¥üËΩΩÂùáË°°
        - ÂÅ•Â∫∑Ê£ÄÊü•
        - Ëá™Âä®ÊïÖÈöúËΩ¨Áßª`"]
    end
    
    %% APIÁΩëÂÖ≥Â±Ç
    subgraph GatewayLayer["`üö™ **APIÁΩëÂÖ≥Â±Ç**`"]
        APISIX["`üéØ **Apache APISIX**
        - Âä®ÊÄÅË∑ØÁî±
        - ËÆ§ËØÅÊéàÊùÉ
        - ÈôêÊµÅÁÜîÊñ≠
        - Êèí‰ª∂Êâ©Â±ï
        - JWTÈ™åËØÅ
        - APIÁâàÊú¨ÁÆ°ÁêÜ`"]
        
        GatewayAdmin["`‚öôÔ∏è **APISIX Dashboard**
        - ÂèØËßÜÂåñÁÆ°ÁêÜ
        - Ë∑ØÁî±ÈÖçÁΩÆ
        - Êèí‰ª∂ÁÆ°ÁêÜ`"]
    end
    
    %% Â∫îÁî®ÊúçÂä°Â±Ç - KubernetesÈõÜÁæ§
    subgraph K8sCluster["`‚ò∏Ô∏è **Kubernetes Áîü‰∫ßÈõÜÁæ§**`"]
        subgraph FluxAPINamespace["`üì¶ **flux-api-prod Namespace**`"]
            FluxPod1["`üü¢ **flux-api-1**
            Replicas: 3
            CPU: 2000m
            Memory: 4Gi
            JVM: -Xms2g -Xmx3g`"]
            
            FluxPod2["`üü¢ **flux-api-2**
            Replicas: 3  
            CPU: 2000m
            Memory: 4Gi
            JVM: -Xms2g -Xmx3g`"]
            
            FluxPod3["`üü¢ **flux-api-3**
            Replicas: 3
            CPU: 2000m
            Memory: 4Gi  
            JVM: -Xms2g -Xmx3g`"]
        end
        
        subgraph JobNamespace["`‚è∞ **job-system Namespace**`"]
            XXLJobAdmin["`üìã **XXL-Job Admin**
            - ‰ªªÂä°Ë∞ÉÂ∫¶‰∏≠ÂøÉ
            - ÂèØËßÜÂåñÁÆ°ÁêÜ
            - ÊâßË°åÁõëÊéß`"]
            
            XXLJobExecutor["`‚öôÔ∏è **XXL-Job Executor**
            - ‰ªªÂä°ÊâßË°åÂô®
            - ÂÆöÊó∂‰ªªÂä°
            - Êï∞ÊçÆÂêåÊ≠•‰Ωú‰∏ö`"]
        end
        
        subgraph MonitoringNamespace["`üìä **monitoring Namespace**`"]
            PrometheusServer["`üìà **Prometheus**
            - ÊåáÊ†áÊî∂ÈõÜ
            - ÂëäË≠¶ËßÑÂàô
            - Êï∞ÊçÆÂ≠òÂÇ®`"]
            
            GrafanaServer["`üìä **Grafana**
            - ÂèØËßÜÂåñÈù¢Êùø
            - ÂëäË≠¶‰ª™Ë°®Êùø
            - ‰∏öÂä°Â§ßÂ±è`"]
            
            PumiAPM["`üîç **ÊôÆÁ±≥APM**
            - Â∫îÁî®ÊÄßËÉΩÁõëÊéß
            - ÈìæË∑ØËøΩË∏™
            - ÈîôËØØÂàÜÊûê
            - ÊÖ¢Êü•ËØ¢ÁõëÊéß`"]
            
            AlertManager["`üö® **AlertManager**
            - ÂëäË≠¶Ë∑ØÁî±
            - ÈùôÈªòÁÆ°ÁêÜ
            - ÈÄöÁü•ÂèëÈÄÅ`"]
        end
        
        subgraph K8sInfra["`üîß **K8sÂü∫Á°ÄËÆæÊñΩ**`"]
            IngressNginx["`üåê **Ingress-Nginx**
            - ‰∏ÉÂ±ÇË¥üËΩΩÂùáË°°
            - SSLÁªàÊ≠¢
            - Ë∑ØÂæÑË∑ØÁî±`"]
            
            HPA["`üìä **HPA**
            - Ëá™Âä®Ê∞¥Âπ≥‰º∏Áº©
            - CPU/ÂÜÖÂ≠òÊåáÊ†á
            - Ëá™ÂÆö‰πâÊåáÊ†á`"]
            
            VPA["`üìè **VPA**
            - ÂûÇÁõ¥Pod‰º∏Áº©
            - ËµÑÊ∫êÊé®Ëçê`"]
        end
    end
    
    %% ÈÖçÁΩÆ‰∏≠ÂøÉ
    subgraph ConfigCenter["`‚öôÔ∏è **ÈÖçÁΩÆ‰∏≠ÂøÉ**`"]
        NacosCluster["`üéõÔ∏è **NacosÈõÜÁæ§**
        - ÈÖçÁΩÆÁÆ°ÁêÜ
        - ÊúçÂä°ÂèëÁé∞
        - ÂÅ•Â∫∑Ê£ÄÊü•
        - ÈÖçÁΩÆÁÉ≠Êõ¥Êñ∞`"]
        
        K8sConfigMap["`üìã **ConfigMap**
        - K8sÂéüÁîüÈÖçÁΩÆ
        - ÁéØÂ¢ÉÂèòÈáè`"]
        
        K8sSecret["`üîê **Secret**
        - ÊïèÊÑü‰ø°ÊÅØ
        - Êï∞ÊçÆÂ∫ìÂØÜÁ†Å
        - APIÂØÜÈí•`"]
        
        Apollo["`üöÄ **Apollo**
        - ÂàÜÂ∏ÉÂºèÈÖçÁΩÆ
        - ÁÅ∞Â∫¶ÂèëÂ∏É
        - ÈÖçÁΩÆÂÆ°ËÆ°`"]
    end
    
    %% ÁºìÂ≠òÂ±Ç
    subgraph CacheLayer["`üì¶ **ÁºìÂ≠òÂ≠òÂÇ®Â±Ç**`"]
        LocalCache["`üíæ **Â∫îÁî®ÂÜÖÁºìÂ≠ò**
        - Caffeine Cache
        - JVM Heap
        - ÊØ´ÁßíÁ∫ßÂìçÂ∫î`"]
        
        RedisCluster["`üî¥ **RedisÈõÜÁæ§**
        - ‰∏ª‰ªéÂ§çÂà∂
        - Âì®ÂÖµÊ®°Âºè
        - ÂàÜÂ∏ÉÂºèÈîÅ
        - ‰ºöËØùÂ≠òÂÇ®`"]
        
        Redissentinel["`üëÅÔ∏è **Redis Sentinel**
        - È´òÂèØÁî®ÁõëÊéß
        - Ëá™Âä®ÊïÖÈöúËΩ¨Áßª`"]
    end
    
    %% Êï∞ÊçÆÂ∫ìÂ±Ç
    subgraph DatabaseLayer["`üíæ **Êï∞ÊçÆÂ∫ìÂ±Ç**`"]
        PostgreSQLMaster["`üêò **PostgreSQL‰∏ªÂ∫ì**
        - ‰∏öÂä°Êï∞ÊçÆÂ≠òÂÇ®
        - ‰∫ãÂä°Â§ÑÁêÜ
        - ACID‰øùËØÅ`"]
        
        PostgreSQLSlave["`üìñ **PostgreSQL‰ªéÂ∫ì**
        - ËØªÂÜôÂàÜÁ¶ª
        - Êï∞ÊçÆÂ§á‰ªΩ
        - Êä•Ë°®Êü•ËØ¢`"]
        
        MongoDB["`üçÉ **MongoDBÈõÜÁæ§**
        - ÊñáÊ°£Â≠òÂÇ®
        - Êó•ÂøóÊï∞ÊçÆ
        - ÂàÜÁâáÈõÜÁæ§`"]
        
        ClickHouse["`‚ö° **ClickHouse**
        - ÂàÜÊûêÊï∞ÊçÆÂ∫ì
        - Â§ßÊï∞ÊçÆÂàÜÊûê
        - ÂÆûÊó∂ÁªüËÆ°`"]
        
        ElasticSearch["`üîç **Elasticsearch**
        - ÂÖ®ÊñáÊêúÁ¥¢
        - Êó•ÂøóÂ≠òÂÇ®
        - Êï∞ÊçÆÂàÜÊûê`"]
    end
    
    %% Ê∂àÊÅØÈòüÂàó
    subgraph MessageQueue["`üì® **Ê∂àÊÅØÈòüÂàó**`"]
        RocketMQ["`üöÄ **RocketMQ**
        - ÂºÇÊ≠•Ê∂àÊÅØ
        - ‰∫ãÂä°Ê∂àÊÅØ
        - È°∫Â∫èÊ∂àÊÅØ`"]
        
        Kafka["`‚ö° **KafkaÈõÜÁæ§**
        - Â§ßÊï∞ÊçÆÊµÅÂ§ÑÁêÜ
        - Êó•ÂøóÊî∂ÈõÜ
        - ‰∫ã‰ª∂ÊµÅ`"]
    end
    
    %% Â§ñÈÉ®ÊúçÂä°‰æùËµñ
    subgraph ExternalServices["`üåê **Â§ñÈÉ®ÊúçÂä°‰æùËµñ**`"]
        DataProvider["`üìä **Êï∞ÊçÆÊúçÂä°ÂïÜ**
        - ÈáëËûçÊï∞ÊçÆAPI
        - ÂÆûÊó∂Ë°åÊÉÖ
        - ÂéÜÂè≤Êï∞ÊçÆ`"]
        
        PaymentGateway["`üí≥ **ÊîØ‰ªòÁΩëÂÖ≥**
        - ÊîØ‰ªòÂÆù/ÂæÆ‰ø°
        - Èì∂ËÅîÊîØ‰ªò
        - Âø´Êç∑ÊîØ‰ªò`"]
        
        SMSService["`üì± **Áü≠‰ø°ÊúçÂä°**
        - È™åËØÅÁ†ÅÂèëÈÄÅ
        - Ëê•ÈîÄÁü≠‰ø°
        - ÂëäË≠¶ÈÄöÁü•`"]
        
        EmailService["`üìß **ÈÇÆ‰ª∂ÊúçÂä°**
        - Á≥ªÁªüÈÇÆ‰ª∂
        - Ëê•ÈîÄÈÇÆ‰ª∂
        - ÂëäË≠¶ÈÇÆ‰ª∂`"]
    end
    
    %% Êó•ÂøóÊî∂ÈõÜ
    subgraph LoggingStack["`üìã **Êó•ÂøóÊî∂ÈõÜÁ≥ªÁªü**`"]
        Filebeat["`üìÑ **Filebeat**
        - Êó•ÂøóÈááÈõÜ
        - ËΩªÈáèÁ∫ßAgent`"]
        
        Logstash["`üîÑ **Logstash**
        - Êó•ÂøóÂ§ÑÁêÜ
        - Êï∞ÊçÆËΩ¨Êç¢
        - Ê†ºÂºèÂåñ`"]
        
        Kibana["`üìä **Kibana**
        - Êó•ÂøóÂèØËßÜÂåñ
        - ÊêúÁ¥¢ÂàÜÊûê
        - ‰ª™Ë°®Êùø`"]
    end
    
    %% ÂØπË±°Â≠òÂÇ®
    subgraph ObjectStorage["`‚òÅÔ∏è **ÂØπË±°Â≠òÂÇ®**`"]
        OSS["`üì¶ **ÈòøÈáå‰∫ëOSS**
        - Êñá‰ª∂Â≠òÂÇ®
        - ÈùôÊÄÅËµÑÊ∫ê
        - Êï∞ÊçÆÂ§á‰ªΩ`"]
        
        MinIO["`üóÑÔ∏è **MinIO**
        - ÁßÅÊúâÂØπË±°Â≠òÂÇ®
        - S3ÂÖºÂÆπ
        - Êï∞ÊçÆÂΩíÊ°£`"]
    end
    
    %% ÁΩëÁªúËøûÊé•ÂÖ≥Á≥ª
    MobileApp --> CDN
    WebApp --> CDN
    ThirdPartyAPI --> WAF
    InternalTools --> WAF
    
    CDN --> WAF
    WAF --> SLB
    SLB --> APISIX
    APISIX --> IngressNginx
    
    IngressNginx --> FluxPod1
    IngressNginx --> FluxPod2
    IngressNginx --> FluxPod3
    
    %% Â∫îÁî®ËøûÊé•ÁºìÂ≠òÂíåÊï∞ÊçÆÂ∫ì
    FluxPod1 --> LocalCache
    FluxPod2 --> LocalCache
    FluxPod3 --> LocalCache
    
    FluxPod1 --> RedisCluster
    FluxPod2 --> RedisCluster
    FluxPod3 --> RedisCluster
    
    FluxPod1 --> PostgreSQLMaster
    FluxPod2 --> PostgreSQLSlave
    FluxPod3 --> MongoDB
    
    %% ÈÖçÁΩÆ‰∏≠ÂøÉËøûÊé•
    NacosCluster --> FluxPod1
    NacosCluster --> FluxPod2
    NacosCluster --> FluxPod3
    Apollo --> FluxPod1
    Apollo --> FluxPod2
    Apollo --> FluxPod3
    
    K8sConfigMap --> FluxPod1
    K8sConfigMap --> FluxPod2
    K8sConfigMap --> FluxPod3
    
    %% ÂÆöÊó∂‰ªªÂä°ËøûÊé•
    XXLJobAdmin --> XXLJobExecutor
    XXLJobExecutor --> PostgreSQLMaster
    XXLJobExecutor --> FluxPod1
    
    %% ÁõëÊéßËøûÊé•
    FluxPod1 --> PrometheusServer
    FluxPod2 --> PrometheusServer
    FluxPod3 --> PrometheusServer
    FluxPod1 --> PumiAPM
    FluxPod2 --> PumiAPM
    FluxPod3 --> PumiAPM
    
    PrometheusServer --> GrafanaServer
    PrometheusServer --> AlertManager
    
    %% Êó•ÂøóËøûÊé•
    FluxPod1 --> Filebeat
    FluxPod2 --> Filebeat
    FluxPod3 --> Filebeat
    Filebeat --> Logstash
    Logstash --> ElasticSearch
    ElasticSearch --> Kibana
    
    %% Ê∂àÊÅØÈòüÂàóËøûÊé•
    FluxPod1 --> RocketMQ
    FluxPod2 --> Kafka
    FluxPod3 --> RocketMQ
    
    %% Â§ñÈÉ®ÊúçÂä°ËøûÊé•
    FluxPod1 --> DataProvider
    FluxPod2 --> PaymentGateway
    FluxPod3 --> SMSService
    FluxPod1 --> EmailService
    
    %% ÂØπË±°Â≠òÂÇ®ËøûÊé•
    FluxPod1 --> OSS
    FluxPod2 --> MinIO
    
    %% Êï∞ÊçÆÂ∫ìÂ§çÂà∂
    PostgreSQLMaster --> PostgreSQLSlave
    Redissentinel --> RedisCluster
    
    %% ÁÆ°ÁêÜÁïåÈù¢
    GatewayAdmin --> APISIX
    XXLJobAdmin --> XXLJobExecutor
    
    %% HPAÁõëÊéßËøûÊé•
    HPA --> FluxPod1
    HPA --> FluxPod2
    HPA --> FluxPod3
    VPA --> FluxPod1
    VPA --> FluxPod2
    VPA --> FluxPod3
    
    %% Ê†∑ÂºèÂÆö‰πâ
    classDef userStyle fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef securityStyle fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef lbStyle fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef gatewayStyle fill:#fff8e1,stroke:#f57f17,stroke-width:2px
    classDef podStyle fill:#e8eaf6,stroke:#3f51b5,stroke-width:2px
    classDef jobStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef monitoringStyle fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    classDef infraStyle fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef configStyle fill:#f1f8e9,stroke:#689f38,stroke-width:2px
    classDef cacheStyle fill:#fff3e0,stroke:#ff8f00,stroke-width:2px
    classDef dbStyle fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef mqStyle fill:#f9fbe7,stroke:#827717,stroke-width:2px
    classDef externalStyle fill:#efebe9,stroke:#5d4037,stroke-width:2px
    classDef logStyle fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef storageStyle fill:#fafafa,stroke:#424242,stroke-width:2px
    
    %% Â∫îÁî®Ê†∑Âºè
    class MobileApp,WebApp,ThirdPartyAPI,InternalTools userStyle
    class CDN,WAF securityStyle
    class SLB lbStyle
    class APISIX,GatewayAdmin gatewayStyle
    class FluxPod1,FluxPod2,FluxPod3 podStyle
    class XXLJobAdmin,XXLJobExecutor jobStyle
    class PrometheusServer,GrafanaServer,PumiAPM,AlertManager monitoringStyle
    class IngressNginx,HPA,VPA infraStyle
    class NacosCluster,K8sConfigMap,K8sSecret,Apollo configStyle
    class LocalCache,RedisCluster,Redissentinel cacheStyle
    class PostgreSQLMaster,PostgreSQLSlave,MongoDB,ClickHouse,ElasticSearch dbStyle
    class RocketMQ,Kafka mqStyle
    class DataProvider,PaymentGateway,SMSService,EmailService externalStyle
    class Filebeat,Logstash,Kibana logStyle
    class OSS,MinIO storageStyle